apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'com.novoda.bintray-release'
apply from: '../config/android-quality.gradle'

android {
  compileSdkVersion Build.compileSDK

  defaultConfig {
    minSdkVersion Build.minSDK
    targetSdkVersion Build.compileSDK
    testInstrumentationRunner Build.testRunner
  }

  lintOptions {
    disable 'InvalidPackage'
  }
}

dependencies {
  api Tests.espressoCore
  api Tests.espressoContrib
  api Tests.uiAutomator
  api Tests.espressoIntents

  implementation SupportLib.annotations
  implementation SupportLib.coreUi
  implementation SupportLib.animatedVectorDrawable
  implementation SupportLib.recyclerView

  implementation Build.kotlin

  testImplementation Tests.jUnit
  testImplementation Tests.jUnitParams
  testImplementation Tests.assertJ1
  testImplementation Tests.mockitoCore
}

publish {
  userOrg = Deploy.userOrg
  groupId = Deploy.groupId
  artifactId = Deploy.artifactId
  publishVersion = Deploy.version
  desc = Deploy.desc
  website = Deploy.website
}

// Exclude Kotlin files from Javadoc due to an error generating docs from Kotlin files.
// More info: https://github.com/novoda/bintray-release/issues/71
tasks.withType(Javadoc) {
  excludes = ['**/*.kt']
}